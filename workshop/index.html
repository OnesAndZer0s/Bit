<html>
  <head>
    <title>Bit - Workshop</title>
    <script src="../Blockly/blockly_compressed.js"></script>
    <script src="../Blockly/blocks_compressed.js"></script>
    <script src="../Blockly/javascript_compressed.js"></script>
    <script src="../Blockly/msg/en.js"></script>
    <script src="workshop_blocks.js"></script>
    <script src="../functions.js"></script>
  </head>
   
  <body>
<table id="blocklyWorkshop" style="width:100%; height:100%">
	<tbody>
		<tr width="100%" height="10%"></tr>
		<tr width="100%" height="90%">
			<td width="50%">
				<div id="blocklyDefine" style="height:870px"></div>
			</td>
			<td width="50%">
				<table style="width: 100%; height: 870px;">
					<tbody>
						<tr>
							<td height="5%">PREVIEW</td>
						</tr>
						<tr>
							<td height="35%">
								<div id="blocklyPreview" style="height: 300px"></div>
							</td>
						</tr>
						<tr>
							<td height="5%">DEFINITION</td>
						</tr>
						<tr>
							<td height="25%" width="100%">
								<textarea id="blockDef" style="width: inherit; height: 210px; resize:none"></textarea>
							</td>
						</tr>
						<tr>
							<td height="5%">CODE</td>
						</tr>
						<tr>
							<td height="25%" width="100%">
								<textarea id="blockCode" style="width: inherit; height: 210px; resize:none"></textarea>
							</td>
						</tr>
					</tbody>
				</table>
			</td>
		</tr>
	</tbody>	  
</table>

<xml id="toolbox" style="display: none">
	<category name="Input"></category>
	<category name="Action"></category>
	<category name="Logic"></category>
	<category name="Variables" custom="VARIABLE"></category>
        <category name="Functions" custom="PROCEDURE"></category>
</xml>
<script>
var define = initBlockly("blocklyDefine", {
  toolbox: document.getElementById('toolbox'),
  collapse : false, 
	comments : true, 
	disable : true, 
	maxBlocks : Infinity, 
	trashcan : true, 
	horizontalLayout : false, 
	toolboxPosition : 'start', 
	css : true, 
	scrollbars : true, 
	sounds : true, 
	oneBasedIndex : false, 
	grid : {
		spacing : 20, 
		length : 1, 
		colour : '#888', 
		snap : false
	}, 
	zoom : {
		controls : true, 
		wheel : true, 
		startScale : 1, 
		maxScale : 1.5, 
		minScale : 0.2, 
		scaleSpeed : 1.2
	}
}, "document.getElementById('blockDef').value = code.split(/\n\s*\n\s*\n/)[0]; console.log(code);");
	
  var main = define.newBlock('workshop_block_description',"desc");
  main.initSvg();
  main.render();
  main.setDeletable(false);
  main.setMovable(false);
	
  define.centerOnBlock("desc");

initBlockly("blocklyPreview", {
  collapse : false, 
	comments : false, 
	disable : false, 
	maxBlocks : Infinity, 
	trashcan : false, 
	horizontalLayout : false, 
	toolboxPosition : 'start', 
	css : true, 
	scrollbars : true, 
	sounds : true, 
	oneBasedIndex : false, 
	zoom : {
		controls : true, 
		wheel : true, 
		startScale : 1, 
		maxScale : 1.5, 
		minScale : 0.2, 
		scaleSpeed : 1.2
	}
}, "document.getElementById('blockDef').value = code.split(/\n\s*\n\s*\n/)[1]; console.log(code);");
</script>
  </body>


</html>
